name = "puppy_breeder_app"
main = "src/worker/index.ts"
compatibility_date = "2024-01-01"

[vars]
ENV = "production"
DOMAIN = "new.gdspuppies.com"

[[kv_namespaces]]
binding = "STATIC_CONTENT"
id = "static_assets_prod"
preview_id = "static_assets_prod"

[[kv_namespaces]]
binding = "AUTH_STORE"
id = "puppy_breeder_AUTH_STORE"
preview_id = "puppy_breeder_AUTH_STORE"

# Redis-like cache using KV
[[kv_namespaces]]
binding = "REDIS_CACHE"
id = "puppy_breeder_redis_cache"
preview_id = "puppy_breeder_redis_cache"

[[d1_databases]]
binding = "PUPPIES_DB"
database_name = "puppy_breeder_db"
database_id = "puppy_breeder_db"

[[r2_buckets]]
binding = "PUPPY_IMAGES"
bucket_name = "puppy-breeder-images"
preview_bucket_name = "puppy-breeder-images"

[durable_objects]
bindings = [
  { name = "SESSIONS", class_name = "puppy_breeder_app_SessionDO" }
]

[[migrations]]
tag = "v1"
new_classes = ["puppy_breeder_app_SessionDO"]

# Required secrets for production (set using wrangler secret put):
# JWT_SECRET - Strong secret for JWT signing
# SQUARE_ACCESS_TOKEN - Square production access token
# SQUARE_SANDBOX_ACCESS_TOKEN - Square sandbox access token  
# SQUARE_APPLICATION_ID - Square application ID for OAuth
# SQUARE_APPLICATION_SECRET - Square application secret for OAuth
# SQUARE_LOCATION_ID - Square production location ID
# SQUARE_SANDBOX_LOCATION_ID - Square sandbox location ID
# SQUARE_WEBHOOK_SIGNATURE_KEY - Square webhook signature verification
# ENCRYPTION_KEY_SECRET - Key for encrypting sensitive data
# ADMIN_EMAIL - Primary admin email address